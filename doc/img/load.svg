<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="645px" preserveAspectRatio="none" style="width:407px;height:645px;background:#FFFFFF;" version="1.1" viewBox="0 0 407 645" width="407px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="121" x="139.75" y="29.4023">Load Program</text><line style="stroke:#A80036;stroke-width:1.0;" x1="59" x2="59" y1="71.6875" y2="638.2773"/><line style="stroke:#A80036;stroke-width:1.0;" x1="260.5" x2="260.5" y1="71.6875" y2="638.2773"/><rect fill="#FEFECE" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="45" x="37" y="40.1992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="44" y="60.7344">Host</text><rect fill="#FEFECE" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="102" x="209.5" y="40.1992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="216.5" y="60.7344">Target(id=2)</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="0" x2="400.5" y1="82.6875" y2="82.6875"/><path d="M25,88.6875 L25,113.6875 L294,113.6875 L294,98.6875 L284,88.6875 L25,88.6875 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><path d="M284,88.6875 L284,98.6875 L294,98.6875 L284,88.6875 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179" x="65.75" y="106.2559">image is 18 bytes, pad to 24</text><polygon fill="#A80036" points="248.5,154.6191,258.5,158.6191,248.5,162.6191,252.5,158.6191" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="59.5" x2="254.5" y1="158.6191" y2="158.6191"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175" x="72.5" y="153.877">START (id=2,len=18+6=24)</text><path d="M265,123.998 L265,178.998 L390,178.998 L390,133.998 L380,123.998 L265,123.998 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><path d="M380,123.998 L380,133.998 L390,133.998 L380,123.998 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="271" y="141.5664">Start load of</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="271" y="156.877">24 byte program</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="271" y="172.1875">(18+6 pad)</text><polygon fill="#A80036" points="70.5,202.2402,60.5,206.2402,70.5,210.2402,66.5,206.2402" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="64.5" x2="259.5" y1="206.2402" y2="206.2402"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="109" y="201.498">REPORT (READY)</text><polygon fill="#A80036" points="248.5,234.5508,258.5,238.5508,248.5,242.5508,252.5,238.5508" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="59.5" x2="254.5" y1="238.5508" y2="238.5508"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="113" y="233.8086">DATA (8 bytes)</text><path d="M265,219.2402 L265,244.2402 L362,244.2402 L362,229.2402 L352,219.2402 L265,219.2402 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><path d="M352,219.2402 L352,229.2402 L362,229.2402 L352,219.2402 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="271" y="236.8086">first 8 bytes</text><polygon fill="#A80036" points="70.5,266.8613,60.5,270.8613,70.5,274.8613,66.5,270.8613" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="64.5" x2="259.5" y1="270.8613" y2="270.8613"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="109" y="266.1191">REPORT (READY)</text><polygon fill="#A80036" points="248.5,299.1719,258.5,303.1719,248.5,307.1719,252.5,303.1719" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="59.5" x2="254.5" y1="303.1719" y2="303.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="113" y="298.4297">DATA (8 bytes)</text><path d="M265,283.8613 L265,308.8613 L364,308.8613 L364,293.8613 L354,283.8613 L265,283.8613 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><path d="M354,283.8613 L354,293.8613 L364,293.8613 L354,283.8613 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="271" y="301.4297">next 8 bytes</text><polygon fill="#A80036" points="70.5,331.4824,60.5,335.4824,70.5,339.4824,66.5,335.4824" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="64.5" x2="259.5" y1="335.4824" y2="335.4824"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="109" y="330.7402">REPORT (READY)</text><polygon fill="#A80036" points="248.5,371.4482,258.5,375.4482,248.5,379.4482,252.5,375.4482" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="59.5" x2="254.5" y1="375.4482" y2="375.4482"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177" x="71.5" y="370.7061">DATA (2 bytes+6 pad bytes)</text><path d="M265,348.4824 L265,388.4824 L390,388.4824 L390,358.4824 L380,348.4824 L265,348.4824 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><path d="M380,348.4824 L380,358.4824 L390,358.4824 L380,348.4824 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="271" y="366.0508">final 2 bytes</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="271" y="381.3613">plus 6 pad bytes</text><polygon fill="#A80036" points="70.5,411.4141,60.5,415.4141,70.5,419.4141,66.5,415.4141" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="64.5" x2="259.5" y1="415.4141" y2="415.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87" x="116.5" y="410.6719">REPORT (END)</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="400.5" x="0" y="444.0693"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="400.5" y1="444.0693" y2="444.0693"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="400.5" y1="447.0693" y2="447.0693"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="155" x="122.75" y="433.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="137" x="128.75" y="449.9824">Load was successful</text><polygon fill="#A80036" points="248.5,484.0352,258.5,488.0352,248.5,492.0352,252.5,488.0352" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="59.5" x2="254.5" y1="488.0352" y2="488.0352"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="130.5" y="483.293">STOP(crc)</text><polygon fill="#A80036" points="70.5,513.3457,60.5,517.3457,70.5,521.3457,66.5,517.3457" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="64.5" x2="259.5" y1="517.3457" y2="517.3457"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="103.5" y="512.6035">REPORT(DONE,ok)</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="400.5" x="0" y="546.001"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="400.5" y1="546.001" y2="546.001"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="400.5" y1="549.001" y2="549.001"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="117" x="141.75" y="535.3457"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="99" x="147.75" y="551.9141">Load has error</text><polygon fill="#A80036" points="248.5,585.9668,258.5,589.9668,248.5,593.9668,252.5,589.9668" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="59.5" x2="254.5" y1="589.9668" y2="589.9668"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="130.5" y="585.2246">STOP(crc)</text><polygon fill="#A80036" points="70.5,615.2773,60.5,619.2773,70.5,623.2773,66.5,619.2773" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="64.5" x2="259.5" y1="619.2773" y2="619.2773"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="96.5" y="614.5352">REPORT(DONE,error)</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="0" x2="400.5" y1="627.2773" y2="627.2773"/><!--MD5=[8b3dc09354eefc3beae38f04146c2f37]
@startuml
skinparam shadowing false
skinparam sequenceMessageAlign center
hide footbox
participant Host as H
participant "Target(id=2)" as T

title Discover Boot Load Targets

== Try ID 1 ==

H ->] : PING(id=1)
note over H: target w/id=1\nnot present
...no reply...

== Try ID 2 ==

H -> T : PING(id=2)
T -> H : REPORT (PONG)

newpage Load Program

note across: image is 18 bytes, pad to 24
H -> T : START (id=2,len=18+6=24)
note right: Start load of\n24 byte program\n(18+6 pad)
T -> H : REPORT (READY)

H -> T : DATA (8 bytes)
note right: first 8 bytes
T -> H : REPORT (READY)
H -> T : DATA (8 bytes)
note right: next 8 bytes
T -> H : REPORT (READY)
H -> T : DATA (2 bytes+6 pad bytes)
note right: final 2 bytes\nplus 6 pad bytes
T -> H : REPORT (END)

== Load was successful ==
H -> T : STOP(crc)
T -> H : REPORT(DONE,ok)

== Load has error ==
H -> T : STOP(crc)
T -> H : REPORT(DONE,error)

newpage Exit Boot Loader

note across: activity or boot\ntimeout expires
...timeout...
T -> T : reboots
note over T: target reboots

@enduml

PlantUML version 1.2021.10(Mon Aug 30 08:43:48 CDT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>